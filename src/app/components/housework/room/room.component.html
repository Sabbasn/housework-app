<app-navbar></app-navbar>
<div class="container">
    <div class="container-top">
        <button class="back-btn" routerLink="/">Back</button>
        <a #hamburgerMenu class="hamburger-menu" [cdkMenuTriggerFor]="roomOptions">
            <span class="dot"></span>
            <span class="dot"></span>
            <span class="dot"></span>
        </a>
        <ng-template #roomOptions>
            <div class="room-options" cdkMenu>
                <button [disabled]="true">Rename</button>
                <button (click)="deleteRoom()">Delete</button>
            </div>
        </ng-template>
        <h1 id="title">{{ currentRoom.name }}</h1>
    </div>
    <div class="chores">
        <div class="chore-preview-list" *ngIf="currentRoom.status != 0" cdkDropList
            (cdkDropListDropped)="choreDrop($event)">
            <div cdkDrag class="chore preview" *ngFor="let chore of chores">
                <h2>{{ chore.name }}</h2>
                <p>{{ chore.description }}</p>
            </div>
        </div>
        <p *ngIf="chores.length == 0">Relax - you have no chores left here!</p>
        <div *ngIf="currentRoom.status == 0">
            <div #choreElem class="chore active" *ngFor="let chore of chores">
                <h2>{{ chore.name }}</h2>
                <p>{{ chore.description }}</p>
                <button *ngIf="currentRoom.status == 0" class="done-btn" (click)="onDoneClick(chore)">✔</button>
            </div>
        </div>
    </div>
    <form #addChoreForm="ngForm" class="show-new-card" [ngClass]="{'showing':showChoreForm}" (ngSubmit)="addChore()">
        <h2>Add Chore</h2>
        <label for="name">Name</label>
        <input placeholder="Name" name="name" autocomplete="off" [(ngModel)]="newChore.name">
        <label for="description">Description</label>
        <textarea placeholder="Description" name="description" [(ngModel)]="newChore.description"></textarea>
        <button class="add-room">✔</button>
    </form>
    <button *ngIf="currentRoom.status != 0" class="show-add-room" [ngClass]="{'active':showChoreForm}"
        appOutsideClick (clickOutside)="showChoreForm = false"
        (click)="toggleChoreForm()">
        <span class="bar"></span>
        <span class="bar"></span>
    </button>
    <button *ngIf="currentRoom.status != 0" class="ready-btn" (click)="onReadyClick()">Ready</button>
</div>